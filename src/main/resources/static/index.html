<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spring Boot Banking System Demo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/banking-style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-university"></i> Spring Boot Banking System</h1>
            <p>은행 계좌 관리 시스템 - 트랜잭션 롤백 및 이벤트 처리 데모</p>
        </header>
        
        <main>
            <nav class="tabs">
                <button class="tab-btn active" data-tab="accounts"><i class="fas fa-piggy-bank"></i> 계좌 관리</button>
                <button class="tab-btn" data-tab="customers"><i class="fas fa-users"></i> 고객 관리</button>
                <button class="tab-btn" data-tab="transactions"><i class="fas fa-exchange-alt"></i> 거래 내역</button>
                <button class="tab-btn" data-tab="notifications"><i class="fas fa-bell"></i> 알림 로그</button>
            </nav>
            
            <!-- 계좌 관리 탭 -->
            <section id="accounts-tab" class="tab-content active">
                <div class="content-grid">
                    <div class="card account-form">
                        <h2><i class="fas fa-plus-circle"></i> 계좌 개설</h2>
                        <form id="accountForm">
                            <div class="form-group">
                                <label for="customerId">고객 ID</label>
                                <select id="customerId" name="customerId" required>
                                    <option value="" disabled selected>고객을 선택하세요</option>
                                    <option value="1">김철수 (CUST001)</option>
                                    <option value="2">이영희 (CUST002)</option>
                                    <option value="3">박상조 (CUST003)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="accountType">계좌 유형</label>
                                <select id="accountType" name="accountType" required>
                                    <option value="" disabled selected>계좌 유형을 선택하세요</option>
                                    <option value="CHECKING">당좌</option>
                                    <option value="SAVINGS">예금 계좌</option>
                                    <option value="CREDIT">신용 계좌</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="currency">통화</label>
                                <select id="currency" name="currency" required>
                                    <option value="KRW" selected>KRW (원)</option>
                                    <option value="USD">USD (달러)</option>
                                    <option value="EUR">EUR (유로)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="accountHolderName">계좌주 명</label>
                                <input type="text" id="accountHolderName" name="accountHolderName" required placeholder="예: 홍길동">
                            </div>
                            <div class="form-group">
                                <label for="branchCode">지점 코드 (선택)</label>
                                <input type="text" id="branchCode" name="branchCode" placeholder="예: 001">
                            </div>
                            <div class="form-group">
                                <label for="initialDeposit">초기 입금액</label>
                                <input type="number" id="initialDeposit" name="initialDeposit" min="0" step="100" placeholder="예: 100000">
                            </div>
                            <div class="form-group checkbox">
                                <input type="checkbox" id="forceFailure" name="forceFailure">
                                <label for="forceFailure">거래 실패 강제 발생</label>
                            </div>
                            <button type="submit" class="btn-primary"><i class="fas fa-check"></i> 계좌 개설</button>
                        </form>
                    </div>
                    
                    <div class="card transaction-form">
                        <h2><i class="fas fa-plus-circle"></i> 입금</h2>
                        <form id="depositForm">
                            <div class="form-group">
                                <label for="depositAccountId">계좌 ID</label>
                                <input type="number" id="depositAccountId" name="accountId" required placeholder="예: 1" value="1">
                            </div>
                            <div class="form-group">
                                <label for="depositCustomerId">고객 ID</label>
                                <input type="number" id="depositCustomerId" name="customerId" required placeholder="예: 1" value="1">
                            </div>
                            <div class="form-group">
                                <label for="depositAmount">입금액</label>
                                <input type="number" id="depositAmount" name="amount" min="1000" step="100" required placeholder="예: 50000" value="50000">
                            </div>
                            <div class="form-group">
                                <label for="depositCurrency">통화</label>
                                <select id="depositCurrency" name="currency" required>
                                    <option value="KRW" selected>KRW (원)</option>
                                    <option value="USD">USD (달러)</option>
                                    <option value="EUR">EUR (유로)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="depositDescription">설명</label>
                                <input type="text" id="depositDescription" name="description" placeholder="예: 월급 입금" value="월급 입금">
                            </div>
                            <div class="form-group checkbox">
                                <input type="checkbox" id="depositForceFailure" name="forceFailure">
                                <label for="depositForceFailure">입금 실패 강제 발생</label>
                            </div>
                            <button type="submit" class="btn-primary"><i class="fas fa-plus"></i> 입금</button>
                        </form>
                    </div>
                </div>
                
                <div class="card accounts-list">
                    <div class="card-header">
                        <h2><i class="fas fa-list-ul"></i> 계좌 목록</h2>
                        <button id="refreshAccountsBtn" class="btn-icon refresh-btn" title="계좌 새로고침"><i class="fas fa-sync-alt"></i></button>
                    </div>
                    <div class="table-container">
                        <table id="accountsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>계좌번호</th>
                                    <th>고객ID</th>
                                    <th>계좌유형</th>
                                    <th>통화</th>
                                    <th>잔액</th>
                                    <th>초과한도</th>
                                    <th>상태</th>
                                    <th>생성일</th>
                                    <th>작업</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <!-- 고객 관리 탭 -->
            <section id="customers-tab" class="tab-content">
                <div class="content-grid">
                    <div class="card customer-form">
                        <h2><i class="fas fa-user-plus"></i> 고객 등록</h2>
                        <form id="customerForm">
                            <div class="form-group">
                                <label for="customerName">고객명</label>
                                <input type="text" id="customerName" name="name" required placeholder="예: 김철수">
                            </div>
                            <div class="form-group">
                                <label for="customerEmail">이메일</label>
                                <input type="email" id="customerEmail" name="email" required placeholder="예: user@example.com">
                            </div>
                            <div class="form-group">
                                <label for="customerPhone">전화번호</label>
                                <input type="tel" id="customerPhone" name="phoneNumber" required placeholder="예: 010-1234-5678">
                            </div>
                            <div class="form-group">
                                <label for="customerType">고객 유형</label>
                                <select id="customerType" name="customerType" required>
                                    <option value="" disabled selected>고객 유형을 선택하세요</option>
                                    <option value="INDIVIDUAL">개인</option>
                                    <option value="BUSINESS">법인</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="dateOfBirth">생년월일 (개인)</label>
                                <input type="date" id="dateOfBirth" name="dateOfBirth" placeholder="예: 1990-01-01">
                            </div>
                            <div class="form-group">
                                <label for="idNumber">주민/사업자번호</label>
                                <input type="text" id="idNumber" name="idNumber" required placeholder="예: 900101-1234567 또는 123-45-67890">
                            </div>
                            <div class="form-group">
                                <label for="customerAddress">주소</label>
                                <textarea id="customerAddress" name="address" rows="3" placeholder="상세 주소 입력"></textarea>
                            </div>
                            <button type="submit" class="btn-primary"><i class="fas fa-user-check"></i> 고객 등록</button>
                        </form>
                    </div>
                    
                    <div class="card customers-list">
                        <div class="card-header">
                            <h2><i class="fas fa-users"></i> 고객 목록</h2>
                            <button id="refreshCustomersBtn" class="btn-icon refresh-btn" title="고객 새로고침"><i class="fas fa-sync-alt"></i></button>
                        </div>
                        <div class="table-container">
                            <table id="customersTable">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>고객번호</th>
                                        <th>이름</th>
                                        <th>이메일</th>
                                        <th>전화번호</th>
                                        <th>유형</th>
                                        <th>상태</th>
                                        <th>생성일</th>
                                        <th>작업</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- 거래 내역 탭 -->
            <section id="transactions-tab" class="tab-content">
                <div class="card full-width">
                    <div class="card-header">
                        <h2><i class="fas fa-exchange-alt"></i> 거래 내역</h2>
                        <button id="refreshTransactionsBtn" class="btn-icon refresh-btn" title="거래 내역 새로고침"><i class="fas fa-sync-alt"></i></button>
                    </div>
                    <div class="table-container">
                        <table id="transactionsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>거래번호</th>
                                    <th>출금계좌</th>
                                    <th>입금계좌</th>
                                    <th>거래유형</th>
                                    <th>금액</th>
                                    <th>통화</th>
                                    <th>상태</th>
                                    <th>참조번호</th>
                                    <th>설명</th>
                                    <th>생성일</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <!-- 알림 로그 탭 -->
            <section id="notifications-tab" class="tab-content">
                <div class="card full-width">
                    <div class="card-header">
                        <h2><i class="fas fa-bell"></i> 알림 로그</h2>
                        <button id="refreshNotificationsBtn" class="btn-icon refresh-btn" title="알림 로그 새로고침"><i class="fas fa-sync-alt"></i></button>
                    </div>
                    <div class="table-container">
                        <table id="notificationsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>GUID</th>
                                    <th>메시지</th>
                                    <th>타입</th>
                                    <th>생성일</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <section class="card logs">
                <div class="card-header">
                    <h2><i class="fas fa-file-alt"></i> 실행 로그</h2>
                    <button id="clearLogsBtn" class="btn-icon clear-btn" title="로그 지우기"><i class="fas fa-trash-alt"></i></button>
                </div>
                <div id="logs" class="log-container"></div>
            </section>
        </main>
    </div>
    
    <!-- 에러 모달 팝업 -->
    <div id="errorModal" class="modal">
        <div class="modal-content error-modal">
            <div class="modal-header">
                <i class="fas fa-exclamation-circle"></i>
                <h3>오류 발생</h3>
                <button class="modal-close" onclick="bankingApp.closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p id="errorMessage"></p>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" onclick="bankingApp.closeModal()">확인</button>
            </div>
        </div>
    </div>

    <!-- 성공 토스트 알림 -->
    <div id="successToast" class="toast">
        <div class="toast-content">
            <i class="fas fa-check-circle"></i>
            <span id="successMessage"></span>
        </div>
    </div>

    <script src="/script.js"></script>
</body>
</html>
